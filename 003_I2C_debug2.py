# https://sentry.io/answers/print-colored-text-to-terminal-with-python/



import socket
import binascii
import time



# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# NN - ProtoBoard V1
# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
NumberOfASIC = 2
ASIC_SELECT  = 3
SocketTimeOut = 5


# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# AK - KCU-FMC 4ASIC
# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# NumberOfASIC = 4
# ASIC_SELECT  = 15
# SocketTimeOut = 5



# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# Global Things
# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
HOST   ="10.1.2.207"
UDP_IP ="10.1.2.208"
PORT   =11000


# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# Start...
# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
print("")
print("-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")
print(">>>                                                         Test Script for Fenerator DAQ test - E:\PlayGround\__Python__\200_10G_Test_001.py                                                                                                 <<<")
print("-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")
print("")

RED     = '\033[31m'
GREEN   = '\033[32m'
YELLOW  = '\033[33m'
BLUE    = '\033[34m'
MAGENTA = '\033[35m'
CYAN    = '\033[36m'
WHITE   = '\033[37m'
RESET   = '\033[0m' # called to return to standard terminal text color


# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# Socket Init...
# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM , 0)
s.bind((HOST,PORT))

s.settimeout(SocketTimeOut) # Sets the socket to timeout after "SocketTimeOut" second of no activity


# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# GetStatus, Check the communication
# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# Position:       -6   -5   -4   -3   -2   -1   00   01   02   03   04   05   06   07   08   09   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39")
# Position:      [   UDP COUNTER   ]  IP  PORT  00   01   02   03   04   05   06   07   08   09   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39")
MesGetStatus   =[0x00,0x00,0x00,0x00,0x00,0x00,0xa0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x02,0x03,0x04]

s.sendto(bytes(MesGetStatus), (UDP_IP, PORT))
data, add = s.recvfrom(1024)

hex_string = binascii.hexlify(data).decode('utf-8')
hex_string2 = r" 0x" + r" 0x".join(hex_string[n : n+2] for n in range(0, len(hex_string), 2))

print("Get Status:")
# print("Position:   -6   -5   -4   -3   -2   -1   00   01   02   03   04   05   06   07   08   09   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39")
print("Position:   [   UDP COUNTER   ]  IP  PORT   00   01   02   03   04   05   06   07   08   09   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33   34   35   36   37   38   39")
print("Status:    %s" % (hex_string2))
print("")


















# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# Close
# -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
s.close()

print("")
print(" >>> END <<<")
print("")

